# 回测内容
这个是参考王纯迅的[纯享投资](https://www.bilibili.com/video/BV1rz4y1k77Y)，
来做的一个回测项目。

重点参考了[【硬核】年化20%的算法交易，财务自由就靠他了](https://www.bilibili.com/video/BV1d5411P7Lt)。

# 算法
- 
- 根据历史，计算上下的区间，也就是覆盖80%的上和下就可以，形成一个网格区间，这个区间是变化，随着时间向前会不断地变化。
- 某天都可以计算出偏离均线的百分比，当发现这个百分比下降一格，就可以出发网格交易了。
- 回顾了510500中证500ETF的偏离年线的百分比，上80%在18%，下80%在-17%，所以，综合认为在上下18%就可以，
- 我们可以设计一个算法，每2%是一个格子，每下跌1格就加仓多1份，每上升1格就多减仓1份
- 只有跌破年线才买入，只有上穿年线才卖出，越涨卖的越多

## 参数

算法涉及到的参数包括：
- 网格的大小：目前是2%，是观察中证500ETF的偏离年线的80%都在[+18%,-18%]这个区间
- 每个网格的投资份数：目前是10000份，这个是不好调节的参数
- 使用的均线：目前用的是年线，242天
- 总资金数：这个是你的弹药，不充分就会导致投到中间就没有钱再投了

## 其他思考

资金利用率：就是你总共的总现金，比如50万，
但是你实际投资进去20万，那么你利用率就是 20/50 = 40%，
但是，你中间可能卖出，你可能亏了钱、或者赚了钱，那该如何算利用率？
算法是：

1、先算投入部分的总收益 = 最终市值+总卖出 - 总买入

2、然后刨除用获利的重复投资，得到实际投入

实际投入 = 总买入 - 投入部分总收益 = 总买入 - （最终市值+总卖出 - 总投入）
= 2*总投入 -  最终市值 - 总卖出

所以，资金利用率就是 = 实际投入/开始的总现金

# ETF基金

截至2022年10月10日，全市场ETF总共有**745**只，其中被动指数型基金有634只，QDII基金有45只，货币市场型基金27只。

- 宽基指数ETF数量152只，规模4562亿元，占股票类ETF总规模39%。
- 行业指数ETF数量334只，规模4374亿元，占股票类ETF总规模38%。
- 跨境型ETF数量72只，规模为1679亿元买，占比为15%。
- 主题指数ETF数量67只，规模为611亿元，占比为5%。
- Smart Beta ETF 35只，规模分别为344亿元，占比为3%。
- 增强指数ETF数量5只，规模为40亿元，占比为0.3%。

**手续费：**

参考华宝证券：ETF手续费万1，单笔最低0.2元